{{define "content"}}
<div class="repositories-container">
    <div class="page-header">
        <h1>Repositories</h1>
        <a href="/repositories/new" class="btn btn-primary">Add Repository</a>
    </div>

    {{if .Error}}
    <div class="alert alert-error">{{.Error}}</div>
    {{end}}

    {{if .Data.Repositories}}
    <div class="table-container">
        <table class="data-table">
            <thead>
                <tr>
                    <th>Repository</th>
                    <th>Source</th>
                    <th>Added</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {{range .Data.Repositories}}
                <tr>
                    <td><a href="{{.GitHubURL}}" target="_blank" rel="noopener">{{.GitHubURL}}</a></td>
                    <td>{{if eq .WebhookSource "github_app"}}<span class="badge badge-primary">GitHub App</span>{{else}}<span class="badge badge-secondary">Webhook</span>{{end}}</td>
                    <td>{{.CreatedAt.Format "Jan 02, 2006"}}</td>
                    <td class="actions-cell">
                        <a href="/repositories/{{.ID}}" class="btn btn-small">View</a>
                        <a href="/repositories/{{.ID}}/edit" class="btn btn-small">Edit</a>
                        <a href="/repositories/{{.ID}}/delete" class="btn btn-small btn-danger">Delete</a>
                    </td>
                </tr>
                {{end}}
            </tbody>
        </table>
    </div>
    {{else}}
    <div class="empty-state">
        <h2>No Repositories Yet</h2>
        <p>Add your first repository to start automatically generating social media posts from your commits.</p>
        <a href="/repositories/new" class="btn btn-primary">Add Repository</a>
    </div>
    {{end}}
</div>
{{end}}
